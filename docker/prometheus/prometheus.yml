global:
  scrape_interval: 15s
  evaluation_interval: 15s

scrape_configs:
  # Node Exporter (system metrics)
  - job_name: 'node-exporter'
    static_configs:
      - targets: ['node-exporter:9100']
        labels:
          instance: 'syntexa-host'

  # PostgreSQL Exporter (database metrics)
  - job_name: 'postgres-exporter'
    static_configs:
      - targets: ['postgres-exporter:9187']
        labels:
          database: 'main'

  # RabbitMQ Exporter
  - job_name: 'rabbitmq-exporter'
    static_configs:
      - targets: ['rabbitmq-exporter:9419']
        labels:
          service: 'rabbitmq'

  # Blockchain Server (Swoole metrics)
  - job_name: 'blockchain-server'
    metrics_path: '/metrics'
    static_configs:
      - targets: ['php-blockchain-server:9501']
        labels:
          node: 'blockchain-server'
          role: 'validator'

  # Shop 1 (Swoole metrics)
  - job_name: 'shop1'
    metrics_path: '/metrics'
    static_configs:
      - targets: ['php-shop1:9501']
        labels:
          node: 'shop1'
          role: 'shop'

  # Shop 2 (Swoole metrics)
  - job_name: 'shop2'
    metrics_path: '/metrics'
    static_configs:
      - targets: ['php-shop2:9501']
        labels:
          node: 'shop2'
          role: 'shop'

